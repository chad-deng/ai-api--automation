# **阶段 11: TDD编码实现 (TDD Implementation)**
*严格遵循测试驱动开发原则编写高质量代码*

#### ✅ **目标检查**
- [ ] **TDD遵循**: 是否严格按照Red-Green-Refactor循环开发？
- [ ] **测试优先**: 每个功能是否都先写测试再写实现？
- [ ] **代码质量**: 是否遵循项目编码规范和SOLID原则？
- [ ] **测试覆盖**: 测试覆盖率是否达到>90%？

#### 📦 **必需产出物**
- [ ] **测试代码**(优先创建)
    - [ ] 单元测试(覆盖率>90%)
    - [ ] 集成测试(关键流程)
    - [ ] 边界条件和异常测试
    - [ ] **🆕 视觉测试**: UI组件的`cy.percySnapshot()`快照测试
- [ ] **功能代码**(测试通过后创建)
    - [ ] 使用Edit/MultiEdit工具进行代码修改
    - [ ] 遵循现有代码风格和约定
    - [ ] 通过所有测试用例
- [ ] **重构优化**: 代码结构、性能、可读性改进
- [ ] **TodoWrite更新**: 逐步标记完成的子任务

#### 🔧 **TDD实现检查清单**
- [ ] **Red阶段**: 编写失败的测试用例
    - [ ] 明确测试目标和期望结果
    - [ ] **🆕 UI组件**: 包含`cy.percySnapshot('component-name')`视觉快照
    - [ ] 运行测试确认失败(红色)
- [ ] **Green阶段**: 编写最简实现代码
    - [ ] 使用Read工具理解现有代码结构
    - [ ] **AI工具规范**: 优先使用`Edit`而非`Write`，先`Read`再修改
    - [ ] 编写最小化实现让测试通过(绿色)
- [ ] **Refactor阶段**: 优化代码质量
    - [ ] 重构代码改进设计
    - [ ] 确保测试仍然通过
    - [ ] 遵循DRY和SOLID原则
- [ ] **持续检查**
    - [ ] 每完成一个Red-Green-Refactor循环更新TodoWrite状态
    - [ ] 确保新代码与现有代码风格一致
    - [ ] 运行完整测试套件确保无回归
    - [ ] **Sprint评审**: PO和QA评审每个Sprint产出

#### 🚦 **阶段完成标准**
> **所有功能完成TDD循环，测试覆盖率>90%，所有测试(包括视觉测试)通过**
> **评审人员**: QA验收