[pytest]
# Pytest configuration for AI API Test Automation

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Output options
addopts = 
    --strict-markers
    --disable-warnings
    --tb=short
    -ra
    --durations=10

# Test Level Classification Markers
markers =
    # Test Levels (primary classification)
    smoke: Smoke tests - fast critical path validation
    integration: Integration tests requiring real services
    load: Load/performance tests with high resource usage
    
    # Test Categories (secondary classification)  
    api_test: API integration test
    crud_test: CRUD operation test
    auth_test: Authentication test
    auth: Authentication test (alias)
    error_scenarios: Error scenario test
    concurrency: Concurrency test
    boundary: Boundary testing
    environment: Environment-specific test
    validation: Data validation test
    unit: Unit test that can run with mocks
    create: Create operation test
    read: Read operation test
    update: Update operation test
    delete: Delete operation test
    batch: Batch operation test
    crud: CRUD operation test (alias)
    rbac: Role-based access control test
    token: Token management test
    performance: Performance test
    error_handling: Error handling test
    security: Security-focused test
    headers: HTTP headers validation test
    cors: CORS (Cross-Origin Resource Sharing) test
    rate_limit: Rate limiting test
    session: Session management test
    oauth: OAuth authentication test
    
    # Test Attributes
    slow: Marks tests as slow (deselect with '-m "not slow"')
    flaky: Tests that may be unstable
    critical: Critical functionality tests
    deprecated: Tests for deprecated functionality

# Minimum version
minversion = 7.0

# Test session timeout
timeout = 300

# Async settings
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Coverage settings
# (when using --cov)
cov-report = html:reports/coverage
cov-fail-under = 70

# HTML report settings
html_report_title = AI API Test Automation Report
html_report_language = en
html_report_encoding = UTF-8