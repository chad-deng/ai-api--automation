specPath: ./openapi.yml
outputDir: ./test-results
environments:
  - name: staging
    baseURL: https://api-staging.example.com
    authProfile: staging-auth
    variables:
      ENV: staging
      LOG_LEVEL: info
      API_VERSION: v1
    mockServer:
      enabled: true
      port: 3001
      scenarios:
        - default
        - error-responses
        - timeout-scenarios
  - name: production
    baseURL: https://api.example.com
    authProfile: prod-auth
    variables:
      ENV: production
      LOG_LEVEL: warn
      API_VERSION: v1

testSuites:
  - name: Functional Tests
    type: functional
    enabled: true
    config:
      includeNegative: true
      includeBoundary: true
      includePerformance: false
      timeout: 30000
      concurrency: 5
    dependencies: []
    retries: 2
    parallel: true

  - name: Contract Validation
    type: contract
    enabled: true
    config:
      strict: true
      validateExamples: true
      validateSecurity: true
      checkCompatibility: true
    dependencies: []
    retries: 1
    parallel: true

  - name: Performance Tests
    type: performance
    enabled: true
    config:
      concurrency: 10
      duration: 300
      rampUp: 30
      thresholds:
        avgResponseTime: 1000
        p95ResponseTime: 2000
        p99ResponseTime: 5000
        errorRate: 5
        minThroughput: 10
    dependencies:
      - Functional Tests
    retries: 1
    parallel: false

  - name: Security Scan
    type: security
    enabled: true
    config:
      scanTypes:
        - owasp-top-10
        - authentication
        - authorization
        - data-exposure
        - input-validation
      severity:
        - critical
        - high
        - medium
        - low
      thresholds:
        maxCritical: 0
        maxHigh: 2
        maxMedium: 5
        maxTotal: 20
        failOnCritical: true
        failOnHigh: false
    dependencies: []
    retries: 1
    parallel: true

  - name: Integration Tests
    type: integration
    enabled: true
    config:
      testComponentIntegration: true
      testWorkflowIntegration: true
      testErrorHandling: true
      testMonitoring: true
    dependencies:
      - Functional Tests
      - Contract Validation
    retries: 1
    parallel: false

workflows:
  - name: Smoke Test
    description: Quick validation of core functionality
    steps:
      - type: setup
        name: Initialize Environment
        config:
          environment: staging
      - type: auth
        name: Configure Authentication
        config:
          profile: staging-auth
      - type: generate
        name: Generate Basic Tests
        config:
          includeOnly:
            - GET
            - POST
          maxEndpoints: 5
      - type: validate
        name: Quick Contract Validation
        config:
          strict: false
      - type: cleanup
        name: Cleanup Resources
        config: {}
    environments:
      - staging
    conditions: []

  - name: Full Regression
    description: Comprehensive testing across all environments
    steps:
      - type: setup
        name: Setup Test Environment
        config:
          environments:
            - staging
            - production
          mockServers: true
      - type: auth
        name: Configure All Auth Profiles
        config:
          profiles:
            - staging-auth
            - prod-auth
      - type: generate
        name: Generate Comprehensive Tests
        config:
          includeNegative: true
          includeBoundary: true
          includePerformance: true
      - type: validate
        name: Full Contract Validation
        config:
          strict: true
          validateExamples: true
          validateSecurity: true
      - type: performance
        name: Performance Testing
        config:
          concurrency: 10
          duration: 300
        continueOnFailure: true
      - type: security
        name: Security Scanning
        config:
          scanTypes:
            - owasp-top-10
            - authentication
            - authorization
        continueOnFailure: true
      - type: cleanup
        name: Cleanup All Resources
        config: {}
    environments:
      - staging
      - production
    conditions:
      - type: environment
        condition: production
        value:
          skipOnFailure: true

  - name: Performance Validation
    description: Focused performance testing and validation
    steps:
      - type: setup
        name: Setup Performance Environment
        config:
          environment: staging
          optimizeForPerformance: true
      - type: auth
        name: Configure Performance Auth
        config:
          profile: perf-auth
      - type: performance
        name: Baseline Performance Test
        config:
          concurrency: 5
          duration: 60
          rampUp: 10
      - type: performance
        name: Load Test
        config:
          concurrency: 20
          duration: 300
          rampUp: 30
      - type: performance
        name: Stress Test
        config:
          concurrency: 50
          duration: 180
          rampUp: 60
        continueOnFailure: true
      - type: cleanup
        name: Performance Cleanup
        config: {}
    environments:
      - staging
    conditions:
      - type: suite
        condition: performance-enabled
        value: true

parallelism: 4
timeout: 600000
cleanup: true
monitoring: true
reportFormats:
  - html
  - json
  - junit
  - markdown